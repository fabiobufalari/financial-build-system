import{r as l,j as e}from"./index-DXA_vukq.js";import{e as v}from"./employeeService-CKeZG5MO.js";const R=()=>{const[c,E]=l.useState([]),[o,f]=l.useState([]),[u,h]=l.useState(!0),[p,d]=l.useState(null),[t,g]=l.useState(""),[n,y]=l.useState(""),[r,b]=l.useState(""),[C,m]=l.useState(!1),[S,N]=l.useState(null),w=["Engenharia","Projetos","Produção","Administrativo","Financeiro","RH"],A=["ACTIVE","INACTIVE","ON_LEAVE","TERMINATED"];l.useEffect(()=>{x()},[]),l.useEffect(()=>{I()},[c,t,n,r]);const x=async()=>{try{h(!0);const s=await v.getAllEmployees();E(s),d(null)}catch(s){d("Erro ao carregar funcionários"),console.error("Error loading employees:",s)}finally{h(!1)}},I=()=>{let s=[...c];if(t){const a=t.toLowerCase();s=s.filter(i=>i.firstName.toLowerCase().includes(a)||i.lastName.toLowerCase().includes(a)||i.email.toLowerCase().includes(a)||i.employeeId.toLowerCase().includes(a)||i.position.toLowerCase().includes(a))}n&&(s=s.filter(a=>a.department===n)),r&&(s=s.filter(a=>a.status===r)),f(s)},T=s=>{g(s)},j=()=>{N(null),m(!0)},D=s=>{N(s),m(!0)},L=async s=>{if(window.confirm("Tem certeza que deseja excluir este funcionário?"))try{await v.deleteEmployee(s),await x()}catch(a){d("Erro ao excluir funcionário"),console.error("Error deleting employee:",a)}},F=s=>{const i={ACTIVE:{label:"Ativo",className:"status-active"},INACTIVE:{label:"Inativo",className:"status-inactive"},ON_LEAVE:{label:"Licença",className:"status-leave"},TERMINATED:{label:"Desligado",className:"status-terminated"}}[s]||{label:s,className:"status-default"};return e.jsx("span",{className:`status-badge ${i.className}`,children:i.label})};return u?e.jsx("div",{className:"employee-page",children:e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Carregando funcionários..."})]})}):e.jsxs("div",{className:"employee-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Funcionários & Custos"}),e.jsx("p",{children:"Gerencie funcionários e controle custos de pessoal"})]}),p&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"⚠️"}),p]}),e.jsxs("div",{className:"search-filter-section",children:[e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("span",{className:"search-icon",children:"🔍"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email, ID ou cargo...",value:t,onChange:s=>T(s.target.value),className:"search-input"})]})}),e.jsxs("div",{className:"filter-container",children:[e.jsxs("select",{value:n,onChange:s=>y(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"",children:"Todos os Departamentos"}),w.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:r,onChange:s=>b(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"",children:"Todos os Status"}),A.map(s=>e.jsx("option",{value:s,children:s==="ACTIVE"?"Ativo":s==="INACTIVE"?"Inativo":s==="ON_LEAVE"?"Licença":"Desligado"},s))]}),e.jsx("button",{onClick:j,className:"create-button",children:"+ Novo Funcionário"})]})]}),e.jsx("div",{className:"results-summary",children:e.jsxs("p",{children:["Mostrando ",o.length," de ",c.length," funcionários",t&&` para "${t}"`]})}),e.jsx("div",{className:"employee-grid",children:o.map(s=>e.jsxs("div",{className:"employee-card",children:[e.jsxs("div",{className:"employee-header",children:[e.jsxs("div",{className:"employee-avatar",children:[s.firstName.charAt(0),s.lastName.charAt(0)]}),e.jsxs("div",{className:"employee-info",children:[e.jsxs("h3",{children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"employee-position",children:s.position}),e.jsx("p",{className:"employee-department",children:s.department})]}),F(s.status)]}),e.jsxs("div",{className:"employee-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"ID:"}),e.jsx("span",{className:"detail-value",children:s.employeeId})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Email:"}),e.jsx("span",{className:"detail-value",children:s.email})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Telefone:"}),e.jsx("span",{className:"detail-value",children:s.phone})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Salário:"}),e.jsx("span",{className:"detail-value",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.salary)})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Admissão:"}),e.jsx("span",{className:"detail-value",children:new Date(s.hireDate).toLocaleDateString("pt-BR")})]})]}),e.jsxs("div",{className:"employee-actions",children:[e.jsx("button",{onClick:()=>D(s),className:"action-button edit-button",children:"✏️ Editar"}),e.jsx("button",{onClick:()=>L(s.id),className:"action-button delete-button",disabled:s.status==="TERMINATED",children:"🗑️ Excluir"})]})]},s.id))}),o.length===0&&!u&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:"👥"}),e.jsx("h3",{children:"Nenhum funcionário encontrado"}),e.jsx("p",{children:t||n||r?"Tente ajustar os filtros de busca":"Comece adicionando um novo funcionário"}),!t&&!n&&!r&&e.jsx("button",{onClick:j,className:"create-button",children:"+ Adicionar Primeiro Funcionário"})]}),C&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:S?"Editar Funcionário":"Novo Funcionário"}),e.jsx("p",{children:"Modal de criação/edição será implementado aqui"}),e.jsx("button",{onClick:()=>m(!1),children:"Fechar"})]})})]})};export{R as default};
